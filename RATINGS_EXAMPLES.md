# 📚 Система рейтингов: Примеры и диаграммы

## 🔄 Жизненный цикл аренды и оценки

```
┌─────────────────────────────────────────────────────────────┐
│ 1. РЕГИСТРАЦИЯ ПОЛЬЗОВАТЕЛЯ                                 │
│    ↓                                                          │
│    Начальный рейтинг: 5.0 ⭐⭐⭐⭐⭐                          │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ 2. АРЕНДА КОНСОЛИ                                            │
│    • Пользователь берет консоль                             │
│    • Выбирает время аренды                                  │
│    • Оплачивает                                             │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ 3. ИСПОЛЬЗОВАНИЕ                                             │
│    (администратор ничего не делает)                        │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ 4. ВОЗВРАТ КОНСОЛИ                                           │
│    ↓                                                          │
│    Администратор проверяет:                                 │
│    ✓ Техническое состояние                                  │
│    ✓ Наличие всех комплектующих                            │
│    ✓ Время возврата                                         │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ 5. ОЦЕНКА (👈 ВОТ ЗДЕСЬ СИСТЕМА РЕЙТИНГОВ)                 │
│    ↓                                                          │
│    Администратор выбирает:                                  │
│    • Состояние консоли (perfect/minor/major/lost)          │
│    • Соблюдение правил (no/minor/major violations)         │
│    • Время возврата (on_time/late_hours/late_days)         │
│    ↓                                                          │
│    Система автоматически рассчитывает новый рейтинг       │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ 6. РЕЗУЛЬТАТ                                                 │
│    • Рейтинг пользователя обновлен                         │
│    • История оценки сохранена                              │
│    • Рейтинг отображается в профиле                       │
└─────────────────────────────────────────────────────────────┘
```

---

## 📊 Формула расчета рейтинга

```
Финальный рейтинг = Базовый (5.0) + Сумма баллов

где Сумма баллов = 
    (Состояние × 0.40) + 
    (Правила × 0.30) + 
    (Время × 0.30)

Диапазон: 1.0 до 5.0 ⭐
```

### Наглядно:

```
                    СОСТОЯНИЕ (40%)
                         ↓
    ┌─────────────────────────────────────┐
    │   +1.0 Идеальное                    │
    │   +0.5 Небольшие повреждения       │
    │   -0.5 Серьезные повреждения       │
    │   -1.5 Потеря/Кража                │
    └─────────────────────────────────────┘

           СОБЛЮДЕНИЕ ПРАВИЛ (30%)
                    ↓
    ┌─────────────────────────────────────┐
    │   +1.0 Без нарушений               │
    │   +0.3 Мелкие нарушения            │
    │   -0.7 Серьезные нарушения         │
    └─────────────────────────────────────┘

            ВРЕМЯ ВОЗВРАТА (30%)
                    ↓
    ┌─────────────────────────────────────┐
    │   +1.0 Вовремя                      │
    │   +0.3 Опоздание на часы            │
    │   -0.5 Опоздание на дни             │
    └─────────────────────────────────────┘
                    ↓
            ┌───────────────┐
            │ НОВЫЙ РЕЙТИНГ │
            └───────────────┘
```

---

## 🎯 Примеры расчетов

### Пример 1: Идеальный пользователь 🌟

```
╔════════════════════════════════════════════════════════════╗
║ ПОЛЬЗОВАТЕЛЬ: Иван (ID: 123456)                           ║
║ КОНСОЛЬ: PS5                                              ║
║ ВРЕМЯ АРЕНДЫ: 3 дня                                       ║
╚════════════════════════════════════════════════════════════╝

ПРОВЕРКА АДМИНИСТРАТОРА:
├─ Консоль проверена → Идеальное состояние ✓
├─ Все комплектующие на месте ✓
├─ Нет следов использования (не курил, не ел) ✓
└─ Вернул вовремя ✓

ВЫБОР ПАРАМЕТРОВ:
┌─────────────────────────────────────────┐
│ Состояние:        perfect (+1.0)        │
│ Правила:          no_violations (+1.0)  │
│ Время:            on_time (+1.0)        │
└─────────────────────────────────────────┘

РАСЧЕТ:
Базовый рейтинг:           5.0
Состояние:     1.0 × 0.40 = 0.40
Правила:       1.0 × 0.30 = 0.30
Время:         1.0 × 0.30 = 0.30
                            ─────
Итого:                      1.00
Итоговый:      5.0 + 1.0 = 6.0 → 5.0 (макс)

РЕЗУЛЬТАТ: ⭐⭐⭐⭐⭐ (5.0)
СТАТУС: "⭐ Отличный пользователь"
ПРИМЕЧАНИЕ: Отличная работа! Консоль в идеальном состоянии
```

---

### Пример 2: Среднее качество 👍

```
╔════════════════════════════════════════════════════════════╗
║ ПОЛЬЗОВАТЕЛЬ: Петр (ID: 654321)                           ║
║ КОНСОЛЬ: PS4                                              ║
║ ВРЕМЯ АРЕНДЫ: 2 дня                                       ║
╚════════════════════════════════════════════════════════════╝

ПРОВЕРКА АДМИНИСТРАТОРА:
├─ Консоль проверена → Небольшие царапины
├─ Кабель немного поврежден (но работает)
├─ Нет серьезных проблем
└─ Вернул с опозданием на 1.5 часа

ВЫБОР ПАРАМЕТРОВ:
┌─────────────────────────────────────────┐
│ Состояние:        minor_damage (+0.5)   │
│ Правила:          no_violations (+1.0)  │
│ Время:            late_hours (+0.3)     │
└─────────────────────────────────────────┘

РАСЧЕТ:
Базовый рейтинг:           5.0
Состояние:     0.5 × 0.40 = 0.20
Правила:       1.0 × 0.30 = 0.30
Время:         0.3 × 0.30 = 0.09
                            ─────
Итого:                      0.59
Итоговый:      5.0 + 0.59 = 5.59 → 5.0 (макс)

РЕЗУЛЬТАТ: ⭐⭐⭐⭐⭐ (5.0)
СТАТУС: "⭐ Отличный пользователь"
ПРИМЕЧАНИЕ: Небольшие царапины, опоздание на 1.5 часа
```

---

### Пример 3: Проблемный пользователь ❌

```
╔════════════════════════════════════════════════════════════╗
║ ПОЛЬЗОВАТЕЛЬ: Сергей (ID: 789012)                         ║
║ КОНСОЛЬ: Xbox Series X                                    ║
║ ВРЕМЯ АРЕНДЫ: 1 день                                      ║
╚════════════════════════════════════════════════════════════╝

ПРОВЕРКА АДМИНИСТРАТОРА:
├─ Консоль возвращена с СИЛЬНЫМИ повреждениями
│  └─ Треснутый экран портов USB
├─ Кожух с вмятинами и царапинами
├─ Обнаружены следы курения
├─ Один джойстик не работает
└─ Вернул на 2 дня позже!

ВЫБОР ПАРАМЕТРОВ:
┌─────────────────────────────────────────┐
│ Состояние:        major_damage (-0.5)   │
│ Правила:          major_violations (-0.7)
│ Время:            late_days (-0.5)      │
└─────────────────────────────────────────┘

РАСЧЕТ:
Базовый рейтинг:           5.0
Состояние:    -0.5 × 0.40 = -0.20
Правила:      -0.7 × 0.30 = -0.21
Время:        -0.5 × 0.30 = -0.15
                            ──────
Итого:                      -0.56
Итоговый:     5.0 - 0.56 = 4.44

РЕЗУЛЬТАТ: 👍 (4.44)
СТАТУС: "👍 Хороший пользователь"
ПРИМЕЧАНИЕ: Серьезные повреждения, опоздание на 2 дня, 
            следы курения. РЕКОМЕНДУЕТСЯ ЗАЛОГ!
```

---

### Пример 4: Отличный + Бонус 🎁

```
╔════════════════════════════════════════════════════════════╗
║ ПОЛЬЗОВАТЕЛЬ: Мария (ID: 456789)                          ║
║ КОНСОЛЬ: PS5 Pro                                          ║
║ ВРЕМЯ АРЕНДЫ: 5 дней                                      ║
║ ПОСТОЯННЫЙ КЛИЕНТ: 25+ арend                              ║
╚════════════════════════════════════════════════════════════╝

ПРОВЕРКА АДМИНИСТРАТОРА:
├─ Консоль в идеальном состоянии ✓
├─ Все правила соблюдены ✓
├─ Вернула вовремя ✓
└─ Постоянный клиент - выдаем бонус!

РАСЧЕТ БАЗОВОЙ ОЦЕНКИ:
Состояние:     1.0 × 0.40 = 0.40
Правила:       1.0 × 0.30 = 0.30
Время:         1.0 × 0.30 = 0.30
               Базовый: 5.0 + 1.0 = 6.0 → 5.0

БОНУС ЛОЯЛЬНОСТИ:
Причина: "Постоянный клиент, 25+ арend"
Размер бонуса: +0.5

ФИНАЛЬНЫЙ РАСЧЕТ:
Базовый рейтинг:    5.0
Бонус:              +0.5
                    ─────
ИТОГОВЫЙ:           5.5 → 5.0 (максимум)

РЕЗУЛЬТАТ: ⭐⭐⭐⭐⭐ (5.0)
СТАТУС: "⭐ Отличный пользователь + VIP"
ПРИМЕЧАНИЕ: Спасибо за верность! Вы - наш лучший клиент!
```

---

## 📈 История оценок одного пользователя

```
ИВАН (ID: 123456) - История рейтингов
═════════════════════════════════════════════════════════════

Аренда #1 (2024-10-01)
└─ Состояние: perfect    ✓
   Правила:   no_viol    ✓
   Время:     on_time    ✓
   РЕЙТИНГ: 5.0 ⭐⭐⭐⭐⭐

Аренда #2 (2024-10-15)
└─ Состояние: minor_dmg  ⚠
   Правила:   no_viol    ✓
   Время:     on_time    ✓
   РЕЙТИНГ: 4.8 ⭐⭐⭐⭐

Аренда #3 (2024-10-29)
└─ Состояние: perfect    ✓
   Правила:   no_viol    ✓
   Время:     late_h     ⚠
   РЕЙТИНГ: 4.9 ⭐⭐⭐⭐

ТРЕНД: 📈 Улучшается
СРЕДНЕЕ: 4.9 ⭐⭐⭐⭐
```

---

## 💰 Влияние рейтинга на условия аренды

```
РЕЙТИНГ          УСЛОВИЯ АРЕНДЫ
═════════════════════════════════════════════════════════════

5.0 ⭐⭐⭐⭐⭐   ✓ Без залога
                 ✓ Премиум консоли доступны
                 ✓ Скидка -10% на прокат
                 ✓ Приоритет в бронировании

4.0-4.9 👍      ✓ Стандартный залог
                 ✓ Все консоли доступны
                 ✓ Обычные цены
                 ✓ Нормальный приоритет

3.0-3.9 ⚠️      ~ Усиленный залог (+50%)
                 ~ Ограничение по времени аренды
                 ~ Возможно требование страховки
                 ~ Второстепенный приоритет

2.0-2.9 ❌      ✗ Дополнительный залог
                 ✗ Требуется нарушитель+гарант
                 ✗ Максимум 1 день в обслуживании
                 ✗ Максимум 1 консоль одновременно

1.0-1.9 🚫      ✗ ЗАБЛОКИРОВАН
                 ✗ Аренда невозможна
                 ✗ Требуется апелляция администратора
```

---

## 🔔 Уведомления и срабатывания

```
АВТОМАТИЧЕСКИЕ ДЕЙСТВИЯ ПРИ ИЗМЕНЕНИИ РЕЙТИНГА
═════════════════════════════════════════════════════════════

Рейтинг упал ниже 3.0:
  └─ 🔔 Админ получает уведомление
  └─ 📧 Пользователю отправляется уведомление
  └─ 📋 Пользователь добавляется в список внимания

Рейтинг вырос до 5.0:
  └─ 🎉 Поздравительное сообщение пользователю
  └─ 🎁 Возможность получить награду/бонус

Рейтинг упал до 2.0 (критический):
  └─ 🚨 Срочное уведомление администратору
  └─ 🔒 Пользователь требует одобрения для следующей аренды
  └─ 💬 Администратор должен связаться с пользователем

Долгое отсутствие оценок (7+ дней):
  └─ ⚠️ Напоминание администратору
  └─ 📊 Статистика считается неполной
```

---

## 🎯 Стратегии для разных типов пользователей

### Новые пользователи (1-3 аренды)

```
Рекомендация: Оценивать честно, помощь в понимании правил
Цель: Установить справедливо начальный рейтинг
```

### Постоянные клиенты (10+ арend)

```
Рекомендация: Выдавать бонусы за лояльность
Цель: Удержать лучших клиентов, вознаградить верность
```

### Проблемные пользователи (средний рейтинг 2-3)

```
Рекомендация: Помочь улучшить условия, требовать залог
Цель: Либо улучшить качество обслуживания, либо прекратить
```

### VIP клиенты (рейтинг 4.8+, 20+ арend)

```
Рекомендация: Специальные привилегии, особое внимание
Цель: Максимальное вознаграждение верности
```

---

## 📊 Метрики и статистика

### Для администратора

```
СТАТИСТИКА РЕЙТИНГОВ
═════════════════════════════════════════════════════════════

Всего пользователей:           127
Средний рейтинг:               4.2 ⭐

Распределение:
├─ ⭐ Отличные (4.5-5.0):      45 (35%)
├─ 👍 Хорошие (4.0-4.4):       52 (41%)
├─ ⚠️ Средние (3.0-3.9):       22 (17%)
├─ ❌ Проблемные (2.0-2.9):    6 (5%)
└─ 🚫 Заблокированные (<2):   2 (2%)

Последние изменения (7 дней):
├─ Выросло: 18 пользователей
├─ Упало:   5 пользователей
└─ Без изменений: 104 пользователя
```

---

**Версия:** 2.0  
**Последнее обновление:** November 2024  
**Все примеры приблизительны и зависят от текущего рейтинга пользователя**
